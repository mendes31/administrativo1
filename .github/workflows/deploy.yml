name: Deploy PHP para Kinghost
 
on:
  push:
    branches:
      - main   # só faz deploy quando houver push na branch main
 
jobs:
  deploy:
    runs-on: ubuntu-latest
 
    steps:
      - name: Checkout código
        uses: actions/checkout@v3
 
      - name: Listar arquivos para verificação
        run: |
          echo "=== ESTRUTURA DE ARQUIVOS ==="
          ls -la
          echo "=== ARQUIVOS PHP ENCONTRADOS ==="
          find . -name "*.php" | head -10
 
      - name: Deploy via FTP
        uses: SamKirkland/FTP-Deploy-Action@v4.3.4
        with:
          server: ${{ secrets.FTP_SERVER }}
          username: ${{ secrets.FTP_USER }}
          password: ${{ secrets.FTP_PASS }}
          local-dir: ./    # pasta local do repositório
          server-dir: ./   # pasta atual do usuário FTP (mais seguro)
          dangerous-clean-slate: false  # não deleta arquivos existentes
          exclude: |
            **/.git*
            **/.git*/**
            **/node_modules/**
            **/.vscode/**
            **/logs/**
            **/vendor/**
            **/bootstrap-5.3.3-dist/**
            **/DataTables/**
            **/startbootstrap-sb-admin-gh-pages/**